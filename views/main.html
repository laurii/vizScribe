<!DOCTYPE html>
<html5>
<head>
  <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" 
          href="stylesheets/annotator.min.css">
    <style type="text/css">
      html, body{
        font: 10px sans-serif;
        height: 100%;
        width: 100%;
        overflow: hidden;
        margin: 0px;
      }
      p {
        font-family: helvetica;
        color: gray;
        margin: 1px;
      }
      #right{
        float:right; // this is IMPORTANT for the annotator to work
        right: 0px;
        width:44.5%;
        margin-left: 0.25%;
        margin-right: 0.25%;
        height:100%;
        background:White;   
      }
      #topright{
        float:right;
        width:50%;
        height:40%;
        background:White;
      }
      #topfarright{
        float: right;
        width: 50%;
        height:40%;
      }
      #bottomright{
        float: right;
        width:100%;
        height: 60%;
        background:White;   
        font: 12px sans-serif;
        font-family:helvetica;
        overflow: hidden;
      }
      // node rect, node text, and path link are for the indented,
      // hierarchical tree that shows protocols defined.
      .node rect {
        cursor: pointer;
        fill: #fff;
        fill-opacity: .5;
        stroke: #3182bd;
        stroke-width: 1.5px;
      }
      .node text {
        font: 10px sans-serif;
        pointer-events: none;
      }
      path.link {
        fill: none;
        stroke: #9ecae1;
        stroke-width: 1.5px;
      }
      #transTitle{
        height: 8%;
        width: 100%;
      }
      #transTitleText{
        padding-bottom: 5px;
        border-top: solid 1px #c0c0c0;
        vertical-align:middle;
        height:100%;
        font-family: "Segoe UI"; 
        font-size:17px;
      }
      .headings{
        font-family: "Segoe UI"; 
        font-size:17px;
        margin: 0px;
        color: #000000;
      }
      #transcriptDiv{
        height:92%;
        width:100%;
        background:#FFFFFF;
        overflow: hidden;
      }
      #annotDiv{
        height: 100%;
        width: 100%;
        float: left;
        overflow: auto;
      }
      #transContent{
        float: left;
        height:100%;
        width:100%;
        background:#FFFFFF;
        overflow: auto;
        box-shadow: inset  0  8px 8px -8px #696868, 
                    inset  0 -8px 8px -8px #696868;
        margin-bottom: 50px;
      }
      #transTable{
        list-style: none;
        list-style-type: none;
        padding-left: 0px;
      }

      *.unselectable {
         -moz-user-select: -moz-none;
         -khtml-user-select: none;
         -webkit-user-select: none;
         -ms-user-select: none;
         user-select: none;
      }
      #protocolTitle{
        height: 8%;
        width: 100%;
      }
      #protocolTitleText{
        margin-right: 50%; 
        vertical-align:middle;
        height:100%;
        color:DarkGray; 
        font-family: "Segoe UI"; 
        font-size:20px;
      }
      #protocolContent{
        height:92%;
        width:100%;
        background:#FFFFFF;
        overflow: hidden;
        border:1px solid;
        border-color: #C9C9C9;
      }
      #protoEdit{
       margin: 0px;
       padding: 0px;
      }
      .textinput{
        -webkit-box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      h3{
            margin: 0px;
        }
      #tagListTitle{
        height:15%;
        width:100%;
        background:#FFFFFF;
        font-size: 11px;
        vertical-align: top;
        overflow: hidden;
        border-left: solid 1px #c0c0c0;
        padding-left: 5px;
      }
      #tagList{
        height: 85%; 
        overflow-y: auto;
        overflow-x: hidden;
        border:1px solid;
        border-color: #C9C9C9;
        padding: 2px;
        box-shadow: inset  0  8px 8px -8px #696868, 
                    inset  0 -8px 8px -8px #696868;
      }

      #left{
        position: absolute;
        left: 0px;
        width:54.5%;
        padding-left: 0.25%;
        padding-right: 0.25%;
        height:100%;
        border-right: 1px solid #d0d0d0;
      }
      #topleft{
        float:left;
        height: 50%;
        width: 100%;
        background:White;
        position: relative;
        z-index: 50;
        -webkit-box-shadow: 0px 8px 16px -6px rgba(0, 0, 0, 0.6);
        -moz-box-shadow: 0px 8px 16px -6px rgba(0, 0, 0, 0.6);
        box-shadow:  0 8px 16px -6px rgba(0, 0, 0, 0.6);
      }
      #videodiv{
        height: 100%;
        width: 100%;
      }
      .vjs-default-skin.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar {
        visibility: visible !important;
        opacity: 1 !important;
        transition-duration: 0s!important;
      }
      #timeline{
        height: 15%;
        width: 100%;
        padding: 0px;
      }
      #transGraphTitle{
        height: 3%;
        width:100%;
        background:#FFFFFF;
        font-size: 11px;
        font-family:helvetica;
        overflow: hidden;
      }
      #transGraph{
        height:20%;
        width:100%;
        background:#FFFFFF;
        overflow: hidden;
      }

      #transGraph.minimize{
        height: 1px;
      }
      #transGraphContent{
        height: 100%;
        width: 100%;
      }
      #transGraphScrubber{
        position: relative;
        height: 100%; 
        width: 0;
        display: block;
        margin-right: 0;
        margin-top: 0;
        overflow: hidden;
        border:2px solid;
        border-color: rgba(0,0,0,0);
        border-right-color: red;
        pointer-events: none;
        z-index: 100;
        -webkit-transition:width 100ms ease-in-out;
        -moz-transition:width 100ms ease-in-out;
        -o-transition:width 100ms ease-in-out;
        transition:width 100ms ease-in-out;
      }
      .transRectHighLight{
        fill: "rgba(220, 138, 12, 0.3)";
      }

      #bottomleft{
        float: left;
        height: 50%;
        width: 100%;
        padding-top: 10px;
        padding-bottom: 10px;
        font: 10px sans-serif;
        font-family:helvetica;
        overflow: scroll;
      }
      #bottomleft::-webkit-scrollbar { 
        display: none; 
      }
      #sketchLogTitle{
        height:3%;
        width:100%;
        background:#FFFFFF;
        font-size: 11px;
        font-family:helvetica;
        overflow: hidden;
      }
      #sketchLog{
        height: 20%; 
        width: 100%; 
        overflow: hidden;
      }
      #sketchLog.minimize {
        height: 1px;
      }
      #sketchLogContent{
        height: 100%;
        width: 100%;
      }
      #sketchLogScrubber{
        height: 100%; 
        width: 0;
        display: block;
        margin-right: 0;
        margin-top: 0;
        overflow: hidden;
        border:2px solid;
        border-color: rgba(0,0,0,0);
        border-right-color: red;
        pointer-events: none;
        z-index: 100;
        -webkit-transition:width 100ms ease-in-out;
        -moz-transition:width 100ms ease-in-out;
        -o-transition:width 100ms ease-in-out;
        transition:width 100ms ease-in-out;
      }

      #speechLogTitle{
        height:3%;
        width:100%;
        background:#FFFFFF;
        font-size: 11px;
        font-family:helvetica;
        overflow: hidden;
      }
      #speechLog{
        height: 20%; 
        width: 100%; 
        overflow: hidden;
      }
      #speechLog.minimize {
        height: 1px;
      }
      #speechLogContent{
        height: 100%;
        width: 100%;
      }
      #speechLogScrubber{
        height: 100%; 
        width: 0;
        display: block;
        margin-right: 0;
        margin-top: 0;
        overflow: hidden;
        border:2px solid;
        border-color: rgba(0,0,0,0);
        border-right-color: red;
        pointer-events: none;
        z-index: 100;
        -webkit-transition:width 100ms ease-in-out;
        -moz-transition:width 100ms ease-in-out;
        -o-transition:width 100ms ease-in-out;
        transition:width 100ms ease-in-out;
      }

      #activityLogTitle{
        height:3%;
        width:100%;
        background:#FFFFFF;
        font-size: 11px;
        font-family:helvetica;
        overflow: hidden;
      }
      #activityLog{
        height: 20%; 
        width: 100%; 
        overflow: hidden;
      }
      #activityLog.minimize {
        height: 0px;
      }
      #activityLogScrubber{
        height: 100%; 
        width: 0;
        display: block;
        margin-right: 0;
        margin-top: 0;
        overflow: hidden;
        border:2px solid;
        border-color: rgba(0,0,0,0);
        border-right-color: red;
        pointer-events: none;
        z-index: 100;
        -webkit-transition:width 100ms ease-in-out;
        -moz-transition:width 100ms ease-in-out;
        -o-transition:width 100ms ease-in-out;
        transition:width 100ms ease-in-out;
      }
      #protocolGraphTitle{
        height:3%;
        width:100%;
        background:#FFFFFF;
        font-size: 11px;
        font-family:helvetica;
        overflow: hidden;
      }
      #protocolGraph{
        height: 50%; 
        width: 100%;
        overflow: hidden;
        background: #FFFFFF;
        overflow: hidden;
      }
      #protocolGraph.minimize {
        height: 0px;
      }
      #protocolGraphScrubber{
        height: 100%; 
        width: 0;
        display: block;
        margin-right: 0;
        margin-top: 0;
        overflow: hidden;
        border:2px solid;
        border-color: rgba(0,0,0,0);
        border-right-color: red;
        pointer-events: none;
        z-index: 100;
        -webkit-transition:width 100ms ease-in-out;
        -moz-transition:width 100ms ease-in-out;
        -o-transition:width 100ms ease-in-out;
        transition:width 100ms ease-in-out;
      }
      #protocolGraphContent{
        height: 100%; 
        width: 100%;
        margin-right: 0;
        margin-top: 0;
        overflow: hidden;
      }

      // code added for collaborator
      #collProtocolGraphTitle{
        height:3%;
        width:100%;
        background:#FFFFFF;
        font-size: 11px;
        font-family:helvetica;
        overflow: hidden;
      }
      #collProtocolGraph{
        height: 50%; 
        width: 100%;
        overflow: hidden;
        background: #FFFFFF;
        overflow: hidden;
      }
      #collProtocolGraph.minimize {
        height: 0px;
      }
      #collProtocolGraphScrubber{
        height: 100%; 
        width: 0;
        display: block;
        margin-right: 0;
        margin-top: 0;
        overflow: hidden;
        border:2px solid;
        border-color: rgba(0,0,0,0);
        border-right-color: red;
        pointer-events: none;
        z-index: 100;
        -webkit-transition:width 100ms ease-in-out;
        -moz-transition:width 100ms ease-in-out;
        -o-transition:width 100ms ease-in-out;
        transition:width 100ms ease-in-out;
      }
      #collProtocolGraphContent{
        height: 100%; 
        width: 100%;
        margin-right: 0;
        margin-top: 0;
        overflow: hidden;
      }
      // end of code added for collaborator

      .codeTextBG{
        background-color: #ffffff;
      }
      #barChart{
        height: 100px;
        border:1px solid;
        border-color: #C9C9C9;
        padding: 2px;
      }
      .header{
        background-color: "rgba(255, 255, 255, 0)";
      }
      .header:hover{
        font-weight: bold;
      }
      .highlighted {
        background: #F8BB64;
        color: #000000;
      }
      .dulled {
        color: Gray;
      }
      .hoverHighlight {
        background-color:rgba(255, 127, 0, 0.3)
      }
      .transHighlight {
        background-color:rgba(255, 127, 0, 0.3)
      }
      .textClickHighlight {
        background-color:rgba(255, 127, 0, 0.8);
        color: #ffffff;
      }
      .tagClickHighlight {
        background-color:rgba(255, 127, 0, 0.6);
        color: #ffffff
      }
      .boldText {
        font-weight: bold;
      }
      .boldClickText {
        font-weight: bold;
        color: #ffffff
      }
      // tabbed view for protocol definition
      #imageView{
        float:left;
        width:100%;
        height:50%;
        background:White;   
      }
      #logFile{
        float:left;
        width:100%;
        height:10%;
        background:White;   
      }

      .axis path,
      .axis line {
        fill: none;
        stroke: #c0c0c0;
        shape-rendering: crispEdges;
      }

      .pathTrace {
        // stroke: rgba(225, 120, 0, 0.5);
        stroke: rgba(150, 150, 150, 0.5);
        stroke-width: 3px;
      }

      .pathTrace:hover {
        stroke: rgba(225, 120, 0, 1);
        // stroke: rgba(150, 150, 150, 0.5);
        stroke-width: 5px;
      }

      .dot {
      }

      .dot:hover{
        fill: rgba(225, 120, 0, 1);
      }

      .dot:active{
        fill: rgba(225, 120, 0, 1);
      }

      .tooltip {
        position: absolute;
        pointer-events: none;
      }

      .largeTooltip {
        position: absolute;
        pointer-events: auto;
      }

      .contextmenu{
        position: absolute;
        visibility: hidden;
        cursor:default;
        font-size:1em;
        opacity:1;
        padding: 5px;
        max-height: 250px;
        overflow: auto;
      }
      .contextmenu>ul{
        display: block;
        margin: 0px;
        padding-left:10px;
        padding-top: 5px;
        padding-bottom: 5px;
        //border-bottom: solid 1px #c0c0c0;
      }
      .contextmenu>ul:hover {
        background:#EC6603;
        color: #fff;
      }
      .contextmenu>ul:last-child {border:none};

      // CSS code for tabs from http://codepen.io/CesarGabriel/pen/tKaxq
      .wrapper {
        background: white;
        margin: auto;
        padding: 1em;
        width: 50%;
        height: 100%;
      }
      h1 {
        text-align: left;
      }
      ul.tabs {
        list-style-type: none;
        margin: 0;
        padding: 0;
      }
      ul.tabs li {
        border: gray solid 1px;
        border-bottom: none;
        float: left;
        margin: 0 .25em 0 0;
        padding: .25em .25em;
      }
      ul.tabs li a {
        color: gray;
        font-weight: bold;
        text-decoration: none;
      }
      ul.tabs li.active {
        background: gray;
      }
      ul.tabs li.active a {
        color: white;
      }
      .clr {
        clear: both;
      }
      article {
        border-top: gray solid 1px;
        padding: 0 1em;
      }
      .block{
        width: 100%;
        height: 100%;
        overflow: auto;
      }
      #protoView{
        width: 100%;
        height: 400px;
        overflow: auto;
      }

      #protoView::-webkit-scrollbar { 
        display: none; 
      }

      #totalProtocols{
        width: 100%;
        height: 300px;
        min-height: 150px;
        background-color: white;
      }
      #popup {
        border: 1px solid gray;
        border-radius: 5px 5px 5px 5px;
        float: left;
        left: 50%;
        margin: auto;
        position: fixed;
        top: 200px;
        z-index: 9999;
      }
        
        
      #concordance-view {    
        background: #FFFFFF;
        left: 12%;
        right: 12%;
        padding-top: 10px;
        padding-bottom: 10px;
        position: fixed;
        z-index: 500;
        height: 50%;
        top: 12%;
        font-size: 12px;
        visibility: hidden;
        font-family: 'Courier New';
        border: 1px solid gray;
        box-shadow: 0 0 15px 8px rgba(0,0,0,0.4);
      }
        
       #concordance-view-content {    
        background: #FFFFFF;
        margin-left: 25px;
        overflow: auto;
        text-align: left;
        font-size: 12px;
        font-family: 'Courier New';
        height: 100%;
      }
      
        
      #concordance-close {
        width: 25px;
        height: 25px; 
        float: right;
        left: 99%;
        top: 30px;
        background-repeat: no-repeat;
        background-image: url(images/close.png);
        background-size: 25px 25px;
      }
        
      #concordance-close:hover {
          background-color: #9ecae1;
      }

      #imgPath {    
        left: 15%;
        background: #FFFFFF;
        margin: auto;
        position: absolute;
        top: 200px;
        text-align: left;
        visibility: hidden;
        border: 1px solid gray;
        box-shadow: 0 0 15px 8px rgba(0,0,0,0.4);
        overflow: none;
        z-index: 100;
      }
       #imgPath-content {    
        background: #FFFFFF;
        overflow-y: auto;
        text-align: left;
        font-size: 12px;
        font-family: 'Courier New';
        float: left;
      }
      #imgPath-close {
        width: 25px;
        height: 25px; 
        float: right;
        left: 99%;
        top: 30px;
        background-repeat: no-repeat;
        background-image: url(images/close.png);
        background-size: 25px 25px;
      }
        
      #imgPath-close:hover {
          background-color: #9ecae1;
      }

      .d3-tip {
        line-height: 1;
        position: absolute;
        z-index: 150;
        font-weight: bold;
        padding: 12px;
        background: rgba(0, 0, 0, 0.8);
        color: #fff;
        border-radius: 2px;
        word-wrap: break-word;
        max-width: 250px;
      }

      /* The pointer doesn't appear where it should, fix it and
         uncomment
      .d3-tip:after {
        box-sizing: border-box;
        display: inline;
        font-size: 10px;
        width: 100%;
        line-height: 1;
        color: rgba(0, 0, 0, 0.8);
        content: "\25BC";
        position: absolute;
        text-align: center;
      }

      .d3-tip.n:after {
        margin: -1px 0 0 0;
        top: 100%;
        left: 0;
      }
      */
        
</style>
  <title>VizScribe</title>
  <script src="javascripts/jquery.js"></script>
  <script src="javascripts/jquery.csv-0.71.min.js"></script>
  <script src="javascripts/jquery.scrollTo-min.js"></script>
  <script src="javascripts/jquery-ui.min.js"></script>
  <script src="javascripts/byrei-dyndiv_1.0rc1.js"></script>
  <script src="javascripts/d3/d3.min.js"></script>
  <script src="javascripts/d3.tooltip.js"></script>
  <!-- The annotator library at http://annotatorjs.org/ allows the
       creation of annotations, useful in our case for the analyst to
       annotate the transcript text -->
  <script src="javascripts/annotator-full.min.js"></script>
  <script src="javascripts/fisheye.js"></script>
  <!-- Change URLs to wherever Video.js files will be hosted -->
  <link href="images/video/video-js.css" rel="stylesheet" type="text/css">
  <!-- video.js must be in the <head> for older IEs to work. -->
  <script src="images/video/video.js"></script>
  <!--
  <script src="javascripts/wavesurfer.min.js"></script>
  -->
  <!-- Unless using the CDN hosted version, update the URL to the Flash SWF -->
  <script type="text/javascript" src="javascripts/mainFunctions.js"></script>
  <script type="text/javascript" src="javascripts/activityViz.js"></script>
  <script type="text/javascript" src="javascripts/speechViz.js"></script>
  <script type="text/javascript" src="javascripts/sketchViz.js"></script>
  <script type="text/javascript" src="javascripts/main.js"></script>
  <script>
    videojs.options.flash.swf = "images/video/video-js.swf";
  </script>
</head>
<body>
  <div id="right">
    <div id="topfarright">
      <div id="tagListTitle">
        <p class="headings">
          Word Cloud from Transcript</p>
        <p>Click on word for occurrences; Ctrl-click for concordance</p>
      </div>
      <div id="tagList"></div>
    </div>
    <div id="topright">
    <section class="wrapper">
      <p class="headings">Codes</p>
      <p>Define and Edit Codes<p>
      <ul class="tabs">
        <li><a href="#tab1">View</a></li>
        <li><a href="#tab2">Add/ Edit</a></li>
        <li><a href="#tab3">Distribution</a></li>
      </ul>
      <div class="clr"></div>
      <section class="block">
        <article id="tab1">
          <div id="protoView">
          </div>
        </article>
        <article id="tab2">
          <div id="protoEdit">
              <textarea id="protocolTextArea" 
                        class = "textinput"
                        rows="20"
                        cols="35"
                        value = ""
                        placeholder="Enter each code on a new line."
                        spellcheck="true">
              </textarea>
          </div>
        </article>
        <article id="tab3">
          <div id="totalProtocols">
          </div>
        </article>
      </section>
    </section>
  </div>
    <div id="bottomright">
      <div id="transTitle">
        <div id="transTitleText"> 
        Transcript
        </div>
      </div>
      <div id="transcriptDiv"> 
        <div id="annotDiv">
          <div id="transContent"> 
            <table id="transTable"></table>
          </div>
        </div>
      </div>
    </div> 
  </div>

    <div id = "left">
      <div id="topleft">
        <div id="videodiv">
          <video id="discussion-video" class="video-js vjs-default-skin"
            controls autoplay preload="auto" height=100% width=100%
            data-setup="{}">
            <source src=<%-JSON.stringify(outputvideo.src)%> 
                    type='video/mp4'/>
          </video>
        </div>
        <!--
        <div id="audiodiv">
          <svg id="waveScrubber">
          </svg>
        </div>
        -->
      </div>
      <div id="bottomleft">
          <div id="transGraphTitle" class="header">
          Graphical View of Transcript [click to contract view]
          </div>
          <div id="transGraph"> 
            <div id="transGraphContent">
            </div>
            <div id="transGraphScrubber">
            </div>
          </div>
          <div id="sketchLogTitle" class="header">
            sketch Participation Chart [click to contract view]
          </div>
          <div id="sketchLog">
            <div id="sketchLogContent">
            </div>
            <svg id="sketchLogScrubber">
            </svg>
          </div>
          <div id="speechLogTitle" class="header">
            Speech Participation Chart [click to contract view]
          </div>
          <div id="speechLog">
            <div id="speechLogContent">
            </div>
            <svg id="speechLogScrubber">
            </svg>
          </div>
          <div id="activityLogTitle" class="header">
            Activity Level Chart [click to contract view]
          </div>
          <div id="activityLog">
            <div id="activityLogContent">
            </div>
            <svg id="activityLogScrubber">
            </svg>
          </div>
          <div id="protocolGraphTitle" class="header">
            Code Timeline
          </div>
          <div id="protocolGraph">
            <div id="protocolGraphContent">
            </div>
            <div id="protocolGraphScrubber">
            </div>
          </div>
          <!--Code added for collaborator-->
          <div id="pollProtocolGraphTitle" class="header">
            Collaborator Code Timeline
          </div>
          <div id="collProtocolGraph">
            <div id="collProtocolGraphContent">
            </div>
            <div id="collProtocolGraphScrubber">
            </div>
          </div>
          <!--end of code for collaborator-->
      </div>   
    </div>
    
  <div id="contextmenu" class="contextmenu"> </div>
  <div id="concordance-view">
  <div id="concordance-close" 
       onclick="document.getElementById('concordance-view')
                        .style
                        .visibility= 'hidden'">
  </div>
   <div id="concordance-view-content">
       </div>
  </div>   
  <div id="imgPath">
    <div id="imgPath-close" 
      onclick="document.getElementById('imgPath').style.visibility= 'hidden'">
  </div>
   <div id="imgPath-content">
  </div>
  </div>
</body>
</html>



